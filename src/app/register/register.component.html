<form [formGroup] ="userForm" >
    <div class="container">
        <div class="row">
            <div class="col-md-1">
                <h1 class="bold">Employee</h1>
            </div>
        </div>
        <div class="row space">
            <!-- <input type="hidden" formControlName = "id"  /> -->
            <div class="col-md-2 bold">Full Name</div>
            <div class="col-md-4">
                <input type="text" class="form-control" formControlName = "fullName" [(ngModel)]="user.fullName" />
                <div *ngIf="userForm.controls['fullName'].invalid && (userForm.controls['fullName'].dirty || userForm.controls['fullName'].touched ||showMessageError)">
                    <span *ngIf = "userForm.controls['fullName'].errors?.required"   class="alert errorMsg" > * Required</span>        
                    </div>
           </div>

        </div>
        <div class="row space">
            <div class="col-md-2 bold">User Name</div>
            <div class="col-md-4">
                <input type="text" class="form-control" formControlName = "userName"  [(ngModel)]="user.userName"  />
                <div *ngIf="userForm.controls['userName'].invalid && (userForm.controls['userName'].dirty || userForm.controls['userName'].touched||showMessageError)">
                    <span *ngIf = "userForm.controls['userName'].errors?.required"  class="alert errorMsg" > * Required</span>
            </div>
           
            </div>
            </div>

            <div class="row space">
                <div class="col-md-2 bold">Phone Number</div>
                <div class="col-md-4">
                    <input type="text" class="form-control" formControlName = "phoneNumber"  [(ngModel)]="user.phoneNumber"/>
                    <div *ngIf="userForm.controls['phoneNumber'].invalid && (userForm.controls['phoneNumber'].dirty || userForm.controls['phoneNumber'].touched||showMessageError)">
                        <span *ngIf = "userForm.controls['phoneNumber'].errors?.pattern"  class="alert errorMsg" > For Example 07 * 1234567"</span>
                         <span *ngIf = "userForm.controls['phoneNumber'].errors?.required" class="alert errorMsg"> * Required</span>
                    </div>    
                </div>
               
                </div>
        
        <div class="row space">
            <div class="col-md-2 bold">Adress</div>
            <div class="col-md-4">
                <input type="text" class="form-control" formControlName = "address" [(ngModel)]="user.address"/>
                <div *ngIf="userForm.controls['address'].invalid && (userForm.controls['address'].dirty || userForm.controls['address'].touched||showMessageError)">
                    <span *ngIf = "userForm.controls['address'].errors?.required"  class="alert errorMsg" > * Required</span>
            </div>
            </div>
           
        </div>
        <div class="row space">
        <div class="col-md-2 bold">Email</div>
            <div class="col-md-4">
                <input type="email" class="form-control" formControlName = "email" [(ngModel)]="user.email" />
                <div *ngIf="userForm.controls['email'].invalid && (userForm.controls['email'].dirty || userForm.controls['email'].touched||showMessageError)">
                    <span *ngIf= "userForm.controls['email'].errors?.required"  class="alert errorMsg" >* Required</span>
                    <span *ngIf = "userForm.controls['email'].errors?.pattern"  class="alert errorMsg" >E-mail is not valid </span>
                </div> 
            </div>
         </div>
            
         <div class="row space" *ngIf = "status == 'save'" >
            <div class="col-md-2 bold">Password</div>
                <div class="col-md-4">
                    <input type="password" class="form-control" formControlName = "password" [(ngModel)]="user.password" name="password"  />
                    <div *ngIf="userForm.controls['password'].invalid && (userForm.controls['password'].dirty || userForm.controls['password'].touched)||showMessageError">
                        <span *ngIf= "userForm.controls['password'].errors?.required"  class="alert errorMsg" > * Required</span>
                        <span *ngIf= "userForm.controls['password'].value?.length < 3 ||showMessageError"  class="alert errorMsg" > * minLength 3 </span>

                    </div>
                </div>
             </div>
             <div class="row space" *ngIf = "status == 'save'" >
                <div class="col-md-2 bold">Confirm Password</div>
                    <div class="col-md-4">
                        <input type="password" class="form-control" formControlName = "confirmPassword" [(ngModel)]="confirmPassword"  appConfirmEqualValidator ="password" />
                        <div *ngIf="userForm.controls['confirmPassword'].invalid && (userForm.controls['confirmPassword'].dirty || userForm.controls['confirmPassword'].touched)||showMessageError">
                            <span *ngIf= "userForm.controls['confirmPassword'].errors?.required"   class="alert errorMsg" > * Required</span>
                             <span *ngIf = "userForm.controls['confirmPassword'].errors?.notEqual"  class="alert errorMsg"  >Password not mached</span>
                        </div>
                    </div>
                 </div>
        <div class="row space" [hidden]="hiddenDepartmentFeild">
            <div class="col-md-2 bold">Department</div>
            <div class="col-md-4">
                <select  class="form-control" formControlName = "department_Id" [(ngModel)]="user.department_Id" >
                <option *ngFor = "let department of departments" [value]= "department.id">{{department.name}}</option>
 
                </select></div>
    
            </div>
    
                <div class="col-md-12" style="margin-top:10px;" >
                    <input *ngIf = "status == 'save'"  type="submit" class="btn btn-primary "  style="margin-left: 500px; margin-right: 10px;"  value="Save"  (click) ="insert()"/>
                    
                    <input *ngIf = "status == 'update'"  type="submit" class="btn btn-primary "  style="margin-left: 500px; margin-right: 10px;"  value="Update" (click)="update()" />

                    <input  type="submit" class="btn btn-primary" value="Cancel"  [routerLink]="location"  />
                  
            </div>
        
    
    </div>
</form>
<div class="modal modalBackground" id="BrandModal" [ngClass]="{'show':popAdd==true}">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" data-dismiss="modal" (click)="popAdd = false">&times;</button>
               
                <span>{{message}}</span>
        </div>
    </div>
</div>
</div>
